<!DOCTYPE html>
<html>
<head>
    <title>Hare and Hounds</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .game-container {
            margin-top: 20px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(7, 60px);
            grid-template-rows: repeat(5, 60px);
            gap: 2px;
            background-color: #333;
            padding: 5px;
            border-radius: 5px;
        }
        .cell {
            background-color: #f0d9b5;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border-radius: 3px;
            font-size: 24px;
        }
        .hare {
            background-color: #4CAF50;
            color: white;
        }
        .hound {
            background-color: #f44336;
            color: white;
        }
        .valid-move {
            background-color: #b5d9f0;
        }
        .status {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        .instructions {
            margin-top: 20px;
            max-width: 500px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Hare and Hounds</h1>
    <div class="game-container">
        <div class="grid" id="grid"></div>
        <div class="status" id="status">Hare's turn</div>
        <button id="restart">Restart Game</button>
    </div>
    <div class="instructions">
        <p><strong>Rules:</strong> The hounds (red) try to trap the hare (green). The hare can move in any direction while hounds can only move forward (downward). Hounds win by blocking the hare's movement. Hare wins by reaching the top row.</p>
    </div>

<script>
    const gridSize = { rows: 5, cols: 7 };
    let harePosition = [4, 3];
    let houndsPositions = [[0, 1], [0, 3], [0, 5]];
    let currentPlayer = 'hare';
    let validMoves = [];
    let gameOver = false;

    const grid = document.getElementById('grid');
    const statusDisplay = document.getElementById('status');
    const restartButton = document.getElementById('restart');

    function initializeGame() {
        harePosition = [4, 3];
        houndsPositions = [[0, 1], [0, 3], [0, 5]];
        currentPlayer = 'hare';
        gameOver = false;
        validMoves = [];
        updateStatus();
        drawGrid();
    }

    function drawGrid() {
        grid.innerHTML = '';
        for (let i = 0; i < gridSize.rows; i++) {
            for (let j = 0; j < gridSize.cols; j++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.dataset.row = i;
                cell.dataset.col = j;

                // Mark valid moves
                if (validMoves.some(move => move[0] === i && move[1] === j)) {
                    cell.classList.add('valid-move');
                }

                // Place pieces
                if (i === harePosition[0] && j === harePosition[1]) {
                    cell.classList.add('hare');
                    cell.textContent = 'ðŸ‡';
                } else if (houndsPositions.some(hound => hound[0] === i && hound[1] === j)) {
                    cell.classList.add('hound');
                    cell.textContent = 'ðŸ•';
                }

                cell.addEventListener('click', () => handleCellClick(i, j));
                grid.appendChild(cell);
            }
        }
    }

    function handleCellClick(row, col) {
        if (gameOver) return;

        if (currentPlayer === 'hare') {
            // If hare is selected, show valid moves
            if (row === harePosition[0] && col === harePosition[1]) {
                calculateValidMoves();
                drawGrid();
                return;
            }
            
            // If a valid move is clicked, move the hare
            if (validMoves.some(move => move[0] === row && move[1] === col)) {
                harePosition = [row, col];
                currentPlayer = 'hound';
                validMoves = [];
                updateStatus();
                
                // Check if hare reached top row (win condition)
                if (harePosition[0] === 0) {
                    gameOver = true;
                    statusDisplay.textContent = "Hare wins by reaching the top!";
                }
            }
        } else {
            // Hounds' turn
            const houndIndex = houndsPositions.findIndex(h => h[0] === row && h[1] === col);
            
            // If a hound is selected, show valid moves
            if (houndIndex !== -1) {
                calculateValidMoves(houndIndex);
                drawGrid();
                return;
            }
            
            // If a valid move is clicked, move the hound
            if (validMoves.some(move => move[0] === row && move[1] === col)) {
                houndsPositions[validMoves.houndIndex] = [row, col];
                currentPlayer = 'hare';
                validMoves = [];
                updateStatus();
            }
        }
        
        drawGrid();
        if (!gameOver) checkGameOver();
    }

    function calculateValidMoves(houndIndex) {
        validMoves = [];
        
        if (currentPlayer === 'hare') {
            // Hare can move to any adjacent cell (including diagonals)
            const directions = [
                [-1, -1], [-1, 0], [-1, 1],
                [0, -1],          [0, 1],
                [1, -1],  [1, 0], [1, 1]
            ];
            
            for (const [dr, dc] of directions) {
                const newRow = harePosition[0] + dr;
                const newCol = harePosition[1] + dc;
                
                if (isValidPosition(newRow, newCol) && !isOccupied(newRow, newCol)) {
                    validMoves.push([newRow, newCol]);
                }
            }
        } else {
            // Hounds can only move forward (downward) diagonally
            validMoves.houndIndex = houndIndex;
            const hound = houndsPositions[houndIndex];
            const directions = [[1, -1], [1, 1]]; // Down-left and down-right
            
            for (const [dr, dc] of directions) {
                const newRow = hound[0] + dr;
                const newCol = hound[1] + dc;
                
                if (isValidPosition(newRow, newCol) && !isOccupied(newRow, newCol)) {
                    validMoves.push([newRow, newCol]);
                }
            }
        }
    }

    function isValidPosition(row, col) {
        return row >= 0 && row < gridSize.rows && col >= 0 && col < gridSize.cols;
    }

    function isOccupied(row, col) {
        if (row === harePosition[0] && col === harePosition[1]) return true;
        return houndsPositions.some(hound => hound[0] === row && hound[1] === col);
    }

    function checkGameOver() {
        // Check if hare is trapped
        calculateValidMoves();
        if (currentPlayer === 'hare' && validMoves.length === 0) {
            gameOver = true;
            statusDisplay.textContent = "Hounds win! Hare is trapped!";
            return;
        }
        
        // Check if hounds have no valid moves (shouldn't normally happen)
        if (currentPlayer === 'hound') {
            let anyHoundCanMove = false;
            for (let i = 0; i < houndsPositions.length; i++) {
                calculateValidMoves(i);
                if (validMoves.length > 0) {
                    anyHoundCanMove = true;
                    break;
                }
            }
            validMoves = [];
            if (!anyHoundCanMove) {
                gameOver = true;
                statusDisplay.textContent = "Hare wins! Hounds can't move!";
            }
        }
    }

    function updateStatus() {
        statusDisplay.textContent = `${currentPlayer === 'hare' ? 'Hare' : 'Hounds'}'s turn`;
    }

    restartButton.addEventListener('click', initializeGame);

    // Initialize the game
    initializeGame();
</script>
</body>
</html>